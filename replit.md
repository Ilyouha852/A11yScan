# Веб-инструмент проверки доступности сайтов

## Обзор проекта

Профессиональное веб-приложение для автоматизированной проверки соответствия веб-сайтов стандартам доступности WCAG AA. Инструмент использует Puppeteer для загрузки страниц в headless-браузере и axe-core для комплексного анализа доступности.

**Дата последнего обновления**: 19 октября 2025

## Основные возможности

### Реализованные функции MVP

1. **Анализ доступности сайтов**
   - Автоматическая проверка любого веб-сайта по URL
   - Использование Puppeteer для загрузки страниц
   - Интеграция axe-core для сканирования по стандартам WCAG 2.1 AA
   - Поддержка проверки после редиректов

2. **Детальные отчеты**
   - Категоризация нарушений: изображения, контрастность, навигация, семантика, формы, ARIA
   - Уровни критичности: критические, серьезные, умеренные, незначительные
   - Информация о затронутых HTML элементах
   - Ссылки на документацию WCAG для каждого нарушения
   - Рекомендации по исправлению

3. **Статистика проверок**
   - Общее количество нарушений
   - Разбивка по уровням критичности
   - Количество пройденных проверок
   - Визуальные карточки с метриками

4. **История проверок**
   - Сохранение всех результатов в PostgreSQL
   - Просмотр последних 50 проверок
   - Информация о дате проверки и URL
   - Быстрый доступ к проверенным сайтам

5. **Пользовательский интерфейс**
   - Адаптивный дизайн для всех устройств
   - Темная и светлая темы
   - Профессиональный, доступный интерфейс
   - Состояния загрузки и ошибок
   - Примеры URL для быстрого тестирования

## Техническая архитектура

### Frontend
- **Фреймворк**: React с TypeScript
- **Маршрутизация**: Wouter
- **Управление состоянием**: TanStack Query (React Query)
- **UI компоненты**: Shadcn UI с Tailwind CSS
- **Иконки**: Lucide React

### Backend
- **Сервер**: Express.js
- **Анализ доступности**: 
  - Puppeteer (headless Chrome)
  - axe-core (библиотека проверки WCAG)
- **База данных**: PostgreSQL (Neon)
- **ORM**: Drizzle ORM
- **Валидация**: Zod

### API Endpoints

#### POST /api/analyze
Запускает проверку доступности для указанного URL.

**Request Body**:
```json
{
  "url": "https://example.com"
}
```

**Response**: Объект AccessibilityCheck с результатами анализа

#### GET /api/checks/:id
Получает результаты конкретной проверки по ID.

**Response**: Объект AccessibilityCheck

#### GET /api/history
Возвращает историю всех проверок (последние 50).

**Response**: Массив объектов AccessibilityCheck

## Структура базы данных

### Таблица: accessibility_checks

| Поле | Тип | Описание |
|------|-----|----------|
| id | varchar (UUID) | Уникальный идентификатор |
| url | text | Исходный URL для проверки |
| checked_at | timestamp | Дата и время проверки |
| total_violations | integer | Общее количество нарушений |
| critical_count | integer | Критические нарушения |
| serious_count | integer | Серьезные нарушения |
| moderate_count | integer | Умеренные нарушения |
| minor_count | integer | Незначительные нарушения |
| passed_count | integer | Пройденные проверки |
| violations | jsonb | Полный список нарушений |
| passes | jsonb | Пройденные проверки |
| incomplete | jsonb | Незавершенные проверки |
| page_title | text | Заголовок страницы |
| tested_url | text | Финальный URL после редиректов |

## Проверки доступности

Инструмент автоматически проверяет:

1. **Изображения (WCAG 1.1.1)**
   - Наличие alt-текстов
   - Корректность описаний
   - Избыточность текста

2. **Контрастность (WCAG 1.4.3)**
   - Соотношение контраста текста и фона (минимум 4.5:1)
   - Контраст крупного текста (минимум 3:1)

3. **Навигация (WCAG 2.1.1, 2.4.7)**
   - Доступность с клавиатуры
   - Видимость фокуса
   - Порядок табуляции
   - Механизмы пропуска блоков

4. **Семантическая структура (WCAG 1.3.1)**
   - Иерархия заголовков
   - Использование landmarks
   - Списки и их структура

5. **Формы (WCAG 3.3.2)**
   - Связь меток с полями
   - Имена кнопок
   - Атрибуты ARIA

6. **ARIA (WCAG 4.1.2)**
   - Корректность атрибутов
   - Валидность ролей
   - Требуемые атрибуты

## Руководство по использованию

### Запуск проверки
1. Введите URL сайта в поле ввода на главной странице
2. Нажмите кнопку "Проверить"
3. Дождитесь завершения анализа (обычно 5-15 секунд)
4. Просмотрите результаты с детальной информацией о нарушениях

### Просмотр истории
1. Нажмите кнопку "История" в шапке сайта
2. Просмотрите список всех выполненных проверок
3. Нажмите на карточку для просмотра деталей

### Интерпретация результатов
- **Критические/Серьезные**: Требуют немедленного исправления
- **Умеренные**: Важно исправить для лучшей доступности
- **Незначительные**: Рекомендуется исправить

## Дизайн и доступность

Приложение следует собственным рекомендациям по доступности:
- Минимальный контраст 4.5:1 для всего текста
- Полная доступность с клавиатуры
- Видимые индикаторы фокуса
- Семантическая HTML структура
- ARIA-метки для динамического контента
- Поддержка программ чтения с экрана
- Адаптивный дизайн для всех устройств

## Зависимости

### Основные
- react ^18
- express
- puppeteer
- axe-core
- drizzle-orm
- @tanstack/react-query
- wouter

### База данных
- @neondatabase/serverless
- PostgreSQL через DATABASE_URL

## Переменные окружения

- `DATABASE_URL` - строка подключения к PostgreSQL
- `PGHOST`, `PGPORT`, `PGUSER`, `PGPASSWORD`, `PGDATABASE` - параметры БД

## Следующие шаги развития

Планируемые функции для будущих версий:
1. Экспорт отчетов в PDF и HTML
2. Проверка нескольких страниц сайта (site-wide scan)
3. Dashboard со статистикой и графиками
4. Сравнение результатов проверок во времени
5. Email-уведомления о критических проблемах
6. API для интеграции с CI/CD
7. Автоматическое расписание проверок
8. Пользовательские правила проверки

## Известные ограничения

- Puppeteer может потребовать значительных ресурсов для сложных сайтов
- Время анализа зависит от размера и сложности страницы
- Некоторые интерактивные элементы могут требовать ручной проверки
- Автоматические проверки не заменяют тестирование с реальными пользователями

## Архитектурные решения

1. **Использование Puppeteer вместо статического анализа HTML**
   - Позволяет анализировать JavaScript-приложения
   - Учитывает финальное состояние DOM
   - Поддержка динамического контента

2. **PostgreSQL для хранения результатов**
   - Надежное хранение истории
   - JSONB для гибкого хранения нарушений
   - Возможность сложных запросов в будущем

3. **Категоризация нарушений**
   - Упрощает понимание проблем
   - Помогает приоритизировать исправления
   - Соответствует реальным категориям WCAG

## Контакты и поддержка

Проект разработан как инструмент для улучшения доступности веб-сайтов малого и среднего бизнеса.
